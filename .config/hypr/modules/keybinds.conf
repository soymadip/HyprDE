#  _  __          ____  _           _
#  | |/ /___ _   _| __ )(_)_ __   __| |___
#  | ' // _ \ | | |  _ \| | '_ \ / _` / __|
#  | . \  __/ |_| | |_) | | | | | (_| \__ \
#  |_|\_\___|\__, |____/|_|_| |_|\__,_|___/
#          |___/
#
#  HyprDE KeyBoard Shortcuts Configuration


# =============== Settings ================

# https://wiki.hypr.land/Configuring/Variables/#binds
binds {
  allow_workspace_cycles = true
  movefocus_cycles_fullscreen = true
  workspace_center_on = 1
  window_direction_monitor_fallback = true
}


#   ================= Key Binds ===================
# =====================================================

$mainMod = SUPER     # Main Super Key

$LMB = mouse:272     # Left Mouse Button
$RMB = mouse:273     # Right Mouse Button

$numPad_0 = code:90

# HomeRow Mods (TODO)
$homerow_mod_1 = A
$homerow_mod_2 = S
$homerow_mod_3 = D
$homerow_mod_4 = F

$power_menu = ~/.config/rofi/powermenu/type-1/powermenu.sh
$logout_cmd = loginctl terminate-user

$wbrwsr_pvt_flag = --private-window --incognito


# ================ Apps ====================

bind = $mainMod,   Q,      killactive                              # Quit Active Window
bind = $mainMod,   X,      exec,   $power_menu                     # Log Out

bind = $mainMod,$mainMod_L, exec,   $app_launcher                  # Open App launcher (Left super key)
bind = $mainMod,$mainMod_R, exec,   $app_launcher                  # Open App launcher (Right super key)
bind = $mainMod, SPACE,     exec,   $app_drawer                    # Open App Drawer
bind = $mainMod,   V,       exec,   $clipboard_manager             # Open Clipboard

bind = $mainMod, RETURN,   exec,   $terminal                       # Open Terminal

bind = $mainMod,   W,      exec,   $web_browser                    # Open Web Browser
bind = $mainMod,   W,      exec,   $web_browser $wbrwsr_pvt_flag   # Open Web Browser Private window

bind = $mainMod,   E,      exec,   $file_manager                   # Open File Manager (GUI)
bind = $mainMod  SHIFT,E,  exec,   $tui_app $tui_file_manager      # Open File Manager (TUI)

bind = $mainMod,   F,      togglefloating,                         # Toggle Float for active window


# ================= Screen-Shot ====================

$ss_cptr_cmd  =  grimblast --freeze save
$ss_file_path =  $ss_save_path/$ss_file_name.png
$ss_edit_cmd  =  satty --filename - --output-filename $ss_file_path

bind = ,              Print,  exec,   $ss_cptr_cmd area   - | $ss_edit_cmd    # Screen-Shot selection/window
bind = $mainMod,      Print,  exec,   $ss_cptr_cmd screen - | $ss_edit_cmd    # Screen-Shot entire screen
bind = $mainMod CTRL, Print,  exec,   $ss_cptr_cmd active - | $ss_edit_cmd    # Screen-Shot active window


# ================ Window Management ================

# ------- Move Focus --------
bind = $mainMod,  K,  movefocus, u          # Move focus to ABOVE window
bind = $mainMod,  J,  movefocus, d          # Move focus to BELOW window
bind = $mainMod,  H,  movefocus, l          # Move focus to LEFT window
bind = $mainMod,  L,  movefocus, r          # Move focus to RIGHT window

# ------- Move Window --------
bind = $mainMod SHIFT,  K,  movefocus, u      # Move active window UpWards
bind = $mainMod SHIFT,  J,  movefocus, d      # Move active window DownWards
bind = $mainMod SHIFT,  H,  movefocus, l      # Move active window Left
bind = $mainMod SHIFT,  L,  movefocus, r      # Move active window Right

bindm = $mainMod, $LMB, movewindow		  # Drag window

# ------- Resize Window --------
bind = $mainMod, R, submap, Resize Window    # Enter SubMap
submap = Resize Window
binde = , l,      resizeactive, 15 0         # Resize active window Right
binde = , h,      resizeactive, -15 0        # Resize active window Left
binde = , k,      resizeactive, 0 -15        # Resize active window Up
binde = , j,      resizeactive, 0 15         # Resize active window Down
bind = , escape,  submap, reset              # Escape SubMap
submap = reset

bindm = $mainMod, $RMB, resizewindow	 # Resize the window towards a direction

# ------- fullscreen --------
bind = $mainMod, F11, fullscreen, 0           # Toggle fullscreen

# bind = $mainMod,  s,  togglesplit,          # Toggle split view (dwindle)
# bind = $mainMod,  Y,  pin,                  # Pin window


# ================= Grouping Windows =================

bind = $mainMod,         K,   togglegroup,
bind = $mainMod,        Tab,  changegroupactive, f
bind = $mainMod SHIFT,  Tab,  changegroupactive, r


# ================ Workspace Management ===============

# ------- Switch to Workspace [0-9] --------
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# ------ Switch to =1/-1 workspace ------
bind = $mainMod,  period,    workspace, e+1
bind = $mainMod, mouse_down, workspace, e+1

bind = $mainMod, comma,    workspace, e-1
bind = $mainMod, mouse_up, workspace, e-1

# ---- Move window to  workspace [1-9] ---
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# ----- Move window to +1/-1 workspace -------
bind = $mainMod SHIFT, comma,  movetoworkspace, -1
bind = $mainMod SHIFT, period, movetoworkspace, +1

# ----- Special Wrokspace ------

bind = $mainMod, S,       togglespecialworkspace, special       # Toggle special workspace
bind = $mainMod SHIFT, S, movetoworkspace, special              # Move window to special workspace


# ================== Volume Control ==================

bindel = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5% && pactl get-sink-volume @DEFAULT_SINK@ | grep -oP '\d+(?=%)' | awk '{if($1>100) system("pactl set-sink-volume @DEFAULT_SINK@ 100%")}' && pactl get-sink-volume @DEFAULT_SINK@ | grep -oP '\d+(?=%)' | awk '{print $1}' | head -1 > /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob # Raise Volume
bindel = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5% && pactl get-sink-volume @DEFAULT_SINK@ | grep -oP '\d+(?=%)' | awk '{print $1}' | head -1 > /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob # Lower Volume
bindel = , XF86AudioMute,        exec, amixer sset Master toggle | sed -En '/\[on\]/ s/.*\[([0-9]+)%\].*/\1/ p; /\[off\]/ s/.*/0/p' | head -1 > /tmp/$HYPRLAND_INSTANCE_SIGNATURE.wob	#Mutes player audio


# ================= Playback Control =================

bind = ,   XF86AudioPlay,  exec,   playerctl play-pause
bind = ,   XF86AudioNext,  exec,   playerctl next
bind = ,   XF86AudioPrev,  exec,   playerctl previous


# ================ Screen Brightness =================

bindel = , XF86MonBrightnessUp,   exec,  brightnessctl s +5% 	#Increases brightness 5%
bindel = , XF86MonBrightnessDown, exec,  brightnessctl s 5%- 	#Decreases brightness 5%


# ================ Workspace Actions =================

# bindd = $mainMod, slash, Switch to the previous workspace, workspace, previous
# Special workspaces (scratchpads)
